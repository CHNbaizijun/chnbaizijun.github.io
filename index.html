<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>白子俊 | 浙江音乐学院附中钢琴专业</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link href="https://fonts.alibabausercontent.com/icon?family=AlibabaPuHuiTi&display=swap" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/leancloud-storage@4.15.0/dist/av-min.js"></script>
</head>

<body>
  <!-- 添加首页标识 -->
  <div id="home"></div>
  
  <!-- 遮罩层 -->
  <div id="authOverlay">
    <div id="authMessage">请登录后查看页面</div>
    <button class="cta-button" id="overlayLoginButton">
        立即登录
    </button>
  </div>
  
  <!-- 导航栏 -->
  <nav class="navbar">
    <div class="nav-brand">
      <div class="logo">白子俊</div>
      <div class="nav-links">
        <a href="#home">首页</a>
        <a href="#about" data-auth>个人简介</a>
        <a href="#achievements" data-auth>获奖情况</a>
        <a href="#teachers" data-auth>学习经历</a>
        <a href="#timeline" data-auth>艺术历程</a>
        <a href="#tools" data-auth>工具站点</a>
        <a href="#contact" data-auth>联系方式</a>
      </div>
    </div>
    
    <div class="nav-controls">
      <div class="user-info" id="userInfo"></div>
      <div class="hamburger">
        <div class="line"></div>
        <div class="line"></div>
        <div class="line"></div>
      </div>
    </div>
  </nav>

  <!-- 悬浮登录按钮 -->
  <div class="login-float-button" id="loginButton"><i class="fas fa-user-lock"></i></div>

  <!-- 登录弹窗 -->
  <div class="login-modal" id="loginModal">
    <div class="login-box">
        <span class="login-close" id="closeLogin">&times;</span>
        
        <div class="form-tabs">
            <button class="tab active" data-tab="login">登录</button>
            <button class="tab" data-tab="signup">注册</button>
            <button class="tab" data-tab="forgot">找回密码</button>
        </div>

        <!-- 独立页面式内容 -->
        <div class="tab-page active" id="loginPage">
            <div class="error-message"></div>
            <input type="email" id="loginEmail" placeholder="注册邮箱">
            <input type="password" id="loginPassword" placeholder="密码">
            <button id="loginBtn">立即登录</button>
        </div>

        <div class="tab-page" id="signupPage">
            <div class="error-message"></div>
            <input type="text" id="signupNickname" placeholder="昵称（2-16位字符）">
            <input type="email" id="signupEmail" placeholder="邮箱">
            <input type="password" id="signupPassword" placeholder="密码（至少8位）" class="pwd-strength">
            <div class="password-strength"></div>
            <input type="password" id="signupPasswordConfirm" placeholder="确认密码">
            <button id="signupBtn">立即注册</button>
        </div>

        <div class="tab-page" id="forgotPage">
            <div class="error-message"></div>
            <input type="email" id="forgotEmail" placeholder="输入注册邮箱">
            <button id="forgotBtn">发送重置邮件</button>
        </div>

        <div class="terms-box">
            <input type="checkbox" id="agreeTerms" checked />
            <label for="agreeTerms">我已阅读并同意<a href="/privacy.html" target="_blank">隐私政策</a></label>
        </div>
    </div>
  </div>

  <!-- 首页内容 -->
  <section class="hero" id="home">
      <div class="hero-content">
          <h1>白子俊</h1>
          <p>浙江音乐学院附中高三钢琴专业学生</p>
          <div class="hero-buttons">
              <button class="cta-button" id="watch-performance">观看演奏视频</button>
              <button class="cta-button outline" onclick="window.location.href='https://chnbaizijun.github.io/more.html'" data-auth>更多</button>
          </div>
      </div>
      <div class="scroll-down">
          <i class="fas fa-chevron-down"></i>
      </div>
  </section>

  <!-- 个人简介 -->
  <section class="about" id="about">
      <h2 class="section-title">个人简介</h2>
      <div class="about-content">
          <div class="about-text">
              <p>白子俊，2007年出生，4岁开始学习钢琴，现为浙江音乐学院附中高三钢琴专业学生，2025年考入中央音乐学院钢琴系。</p>
              <p>2022年以专业和文化课第一的成绩升入高中部，连续五年评为校级三好学生并获得奖学金，现任浙音附中学生会主席。</p>
              <p>2021年入选浙江音乐学院李叔同学院"拔尖人才培养计划"。</p>
              <p>曾与浙江交响乐团、台北国际联合青年交响乐团合作演出，指挥家孙舒彦、韦丹文等合作演出钢琴协奏曲。成功举办了三场个人独奏音乐会。</p>
              <p>作为第十届施坦威全国青少年钢琴比赛总决赛的获奖选手，应邀在施坦威霍洛维茨音乐厅举办了"施坦威获奖选手导赏音乐会"。入学以来参加了近40场学院和附中组织的社会实践活动演出，2021年获得浙江音乐学院暑期社会实践先进个人称号，2023年度浙江音乐学院优秀团员。</p>
          </div>
          <div class="about-image">
              <img src="../library/personalphoto.jpg" alt="白子俊">
          </div>
      </div>
  </section>

  <!-- 获奖情况 -->
  <section class="achievements" id="achievements">
      <h2 class="section-title">获奖情况</h2>
      <div class="achievements-grid">
          <div class="achievement-card">
              <span class="year-badge">2024年</span>
              <h3>中国音乐小金钟全国展演</h3>
              <p>入围中国音乐家协会"中国音乐小金钟"全国展演</p>
          </div>
          <div class="achievement-card">
              <span class="year-badge">2023年</span>
              <h3>鼓浪屿青少年钢琴比赛</h3>
              <p>第十二届鼓浪屿青少年钢琴比赛少年组第一名</p>
          </div>
          <div class="achievement-card">
              <span class="year-badge">2022年</span>
              <h3>施坦威全国青少年钢琴比赛</h3>
              <p>第十届施坦威全国青少年钢琴比赛华东一区专业B组第一名和全国总决赛第三名</p>
          </div>
          <div class="achievement-card">
              <span class="year-badge">2021年</span>
              <h3>浙江音乐学院"尽善奖"</h3>
              <p>钢琴系中国作品钢琴比赛附中组第一名</p>
          </div>
          <div class="achievement-card">
              <span class="year-badge">2020年</span>
              <h3>浙江音乐学院比赛</h3>
              <p>"贝多芬钢琴协奏曲"比赛第二名</p>
          </div>
          <div class="achievement-card">
              <span class="year-badge">2019年</span>
              <h3>施坦威全国青少年钢琴比赛</h3>
              <p>第九届施坦威全国青少年钢琴比赛华东一区专业A组第一名</p>
          </div>
          <div class="achievement-card">
              <span class="year-badge">2019年</span>
              <h3>雅马哈亚洲音乐奖学金</h3>
              <p>2019年和2021年分别获得雅马哈亚洲音乐奖学金</p>
          </div>
          <div class="achievement-card">
              <span class="year-badge">2013年</span>
              <h3>嘉德威杯国际青少年钢琴大赛</h3>
              <p>第三届嘉德威杯国际青少年钢琴大赛总决赛第一名</p>
          </div>
      </div>
  </section>

  <!-- 学习经历 -->
  <section class="teachers" id="teachers">
      <h2 class="section-title">学习经历</h2>
      <div class="teachers-container">
          <div class="current-teacher">
              <img src="../library/cxy.jpg" alt="陈小雨博士" class="teacher-photo current-photo">
              <h3>现任导师</h3>
              <p>陈小雨 博士</p>
              <p>浙江音乐学院</p>
          </div>
          <div class="other-teachers">
              <div class="teacher-card">
                  <img src="../library/wx.jpg" alt="吴晓副教授" class="teacher-photo">
                  <h3>前任导师</h3>
                  <p>吴晓 副教授</p>
                  <p>浙江音乐学院</p>
              </div>
              <div class="teacher-card">
                  <img src="../library/ym.jpg" alt="姚镁老师" class="teacher-photo">
                  <h3>启蒙导师</h3>
                  <p>姚镁 老师</p>
              </div>
          </div>
      </div>
  </section>

  <!-- 艺术历程 -->
  <section class="timeline-section" id="timeline">
      <h2 class="section-title">艺术历程</h2>
      <div class="timeline">
          <div class="timeline-item">
              <div class="timeline-year">2025年</div>
              <div class="timeline-content">
                  <p class="timeline-text">考入中央音乐学院钢琴系</p>
              </div>
          </div>
          <div class="timeline-item">
              <div class="timeline-year">2024年</div>
              <div class="timeline-content">
                  <p class="timeline-text">入围中国音乐小金钟全国展演</p>
                  <p class="timeline-text">举办第三场个人独奏音乐会</p>
              </div>
          </div>
          <div class="timeline-item">
              <div class="timeline-year">2023年</div>
              <div class="timeline-content">
                  <p class="timeline-text">第十二届鼓浪屿青少年钢琴比赛少年组第一名</p>
                  <p class="timeline-text">获得浙江音乐学院优秀团员称号</p>
              </div>
          </div>
          <div class="timeline-item">
              <div class="timeline-year">2022年</div>
              <div class="timeline-content">
                  <p class="timeline-text">第十届施坦威全国青少年钢琴比赛华东一区专业B组第一名和全国总决赛第三名</p>
                  <p class="timeline-text">在施坦威霍洛维茨音乐厅举办"施坦威获奖选手导赏音乐会"</p>
                  <p class="timeline-text">以专业和文化课第一的成绩升入高中部</p>
              </div>
          </div>
          <div class="timeline-item">
              <div class="timeline-year">2021年</div>
              <div class="timeline-content">
                  <p class="timeline-text">入选浙江音乐学院李叔同学院"拔尖人才培养计划"</p>
                  <p class="timeline-text">浙江音乐学院钢琴系"尽善奖"中国作品钢琴比赛附中组第一名</p>
                  <p class="timeline-text">获得浙江音乐学院暑期社会实践先进个人称号</p>
              </div>
          </div>
          <div class="timeline-item">
              <div class="timeline-year">2020年</div>
              <div class="timeline-content">
                  <p class="timeline-text">浙江音乐学院"贝多芬钢琴协奏曲"比赛第二名</p>
              </div>
          </div>
          <div class="timeline-item">
              <div class="timeline-year">2019年</div>
              <div class="timeline-content">
                  <p class="timeline-text">考入浙江音乐学院附属音乐学校初中部</p>
                  <p class="timeline-text">第九届施坦威全国青少年钢琴比赛华东一区专业A组第一名</p>
                  <p class="timeline-text">获得雅马哈亚洲音乐奖学金</p>
              </div>
          </div>
      </div>
  </section>

  <!-- 工具站点 -->
  <section class="tools-section" id="tools">
      <h2 class="section-title">工具站点 <i class="fas fa-chevron-down toggle-icon"></i></h2>
      <div class="tools-container">
          <div class="tools-grid">
              <a href="https://www.musicnotes.com" target="_blank" class="tool-card">
                  <i class="fas fa-music"></i>
                  <h3>Musicnotes</h3>
                  <p>乐谱下载平台</p>
              </a>
              <a href="https://imslp.org" target="_blank" class="tool-card">
                  <i class="fas fa-book-open"></i>
                  <h3>IMSLP</h3>
                  <p>公共版权乐谱库</p>
              </a>
              <a href="https://www.metronomeonline.com" target="_blank" class="tool-card">
                  <i class="fas fa-clock"></i>
                  <h3>在线节拍器</h3>
                  <p>免费节拍器工具</p>
              </a>
              <a href="https://www.pianoworld.com" target="_blank" class="tool-card">
                  <i class="fas fa-piano-keyboard"></i>
                  <h3>Piano World</h3>
                  <p>钢琴爱好者论坛</p>
              </a>
          </div>
      </div>
  </section>

  <!-- 页脚 -->
  <footer id="contact">
      <img src="https://p1.ssl.qhimg.com/t0125b8c25bfab864a2.jpg" alt="中央音乐学院" class="school-logo">
      <p>2025级中央音乐学院钢琴系</p>
      <div class="contact-info">
          <p>WeChat: FreedomOfSpace</p>
          <p>电子邮件: CHNbaizijun@163.com</p>
      </div>
      <div class="social-icons">
          <a href="#"><i class="fab fa-weixin"></i></a>
          <a href="#"><i class="fab fa-weibo"></i></a>
          <a href="#"><i class="fab fa-qq"></i></a>
          <a href="mailto:CHNbaizijun@163.com"><i class="fas fa-envelope"></i></a>
      </div>
      <div class="beian">
          <a href="https://beian.miit.gov.cn">京ICP备XXXXXXXX号</a>
      </div>
  </footer>

  <!-- 悬浮：个人中心面板 -->
  <div class="floating-panel" id="floatingUserPanel">
      <h3>个人中心</h3>
      <p><strong>昵称：</strong><span id="pc-username">--</span></p>
      <p><strong>邮箱：</strong><span id="pc-email">--</span></p>
      <p><strong>ID：</strong><span id="pc-userid">--</span></p>
      <p><strong>注册时间：</strong><span id="pc-created">--</span></p>
      <p><strong>登录时间：</strong><span id="pc-login">--</span></p>
  </div>

  <!-- 悬浮：展开/收起按钮 -->
  <div class="floating-toggle" id="toggleUserPanel">收起</div>

  <!-- 悬浮：未登录提示 -->
  <div class="login-float-tip" id="loginFloatTip">请先登录以查看个人中心</div>
  
  <!-- 播放视频弹窗 -->
  <div id="videoModal" class="video-modal">
      <div class="video-modal-content">
          <span class="close-video">&times;</span>
          <video controls autoplay>
              <source src="../library/performance.mp4" type="video/mp4">
              您的浏览器不支持视频播放
          </video>
      </div>
  </div>

  <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script>
    // 初始化 LeanCloud
    AV.init({
      appId: '0lpjg6Zgwua9jqUZDeJMVxpr-gzGzoHsz',
      appKey: 'gV34QMHiVXzzDiS4GdyXtZt9',
      serverURL: 'https://0lpjzgw.lc-cn-n1-shared.com'
    });

    // 更新用户状态，控制欢迎信息与个人中心显示
    function updateUserStatus() {
      const user = AV.User.current();
      const overlay = $('#authOverlay');
      
      if (!user) {
        // 创建遮罩层
        if (overlay.length === 0) {
          $('body').append(`
            <div id="authOverlay">
                <div id="authMessage">请登录后查看页面</div>
                <button class="cta-button" id="overlayLoginButton">
                    立即登录
                </button>
            </div>
          `);
        }
        // 隐藏非首页内容
        $('section:not(#home), footer').hide();
      } else {
        // 登录后显示所有内容
        $('#authOverlay').remove();
        $('section, footer').show();
      }

      const infoEl = $('#userInfo');
      const panel = $('#floatingUserPanel');
      const toggleBtn = $('#toggleUserPanel');
      const tip = $('#loginFloatTip');

      if (user) {
        const email = user.getEmail();
        const username = user.getUsername();
        const created = new Date(user.createdAt).toLocaleString();
        const updated = new Date(user.updatedAt).toLocaleString();
        const id = user.id;

        infoEl.html(`欢迎：${username} <span id="logoutBtn">退出</span>`);
        $('#loginButton').hide();
        tip.hide();

        // 显示浮窗
        $('#pc-username').text(username);
        $('#pc-email').text(email || '未绑定');
        $('#pc-userid').text(id);
        $('#pc-created').text(created);
        $('#pc-login').text(updated);
        panel.addClass('active');
        toggleBtn.addClass('active').text('收起');
      } else {
        infoEl.empty();
        $('#loginButton').show();
        panel.removeClass('active');
        toggleBtn.removeClass('active');
        tip.show();
      }
    }

    // 悬浮窗切换按钮
    $(document).on('click', '#toggleUserPanel', function () {
      const panel = $('#floatingUserPanel');
      const btn = $(this);
      if (panel.hasClass('active')) {
        panel.removeClass('active');
        btn.text('展开个人中心');
      } else {
        panel.addClass('active');
        btn.text('收起');
      }
    });

    // 文档加载完成
    $(document).ready(function () {
      updateUserStatus();

      // 登录弹窗显示
      $('#loginButton, #overlayLoginButton').click(function () {
        $('#loginModal').addClass('active');
        $('body').addClass('no-scroll');
      });
      
      $('#closeLogin').click(function () {
        $('#loginModal').removeClass('active');
        $('body').removeClass('no-scroll');
      });

      // 修改后的平滑滚动锚点逻辑
      $("a[href^='#']").on("click", function (event) { // 只匹配锚点链接
        event.preventDefault();
        const hash = this.hash;
        if (!$(hash).length) return; // 确保目标存在
        
        const targetOffset = $(hash).offset().top - 80;
        $("html, body").animate(
            { scrollTop: targetOffset },
            800,
            () => window.history.pushState(null, null, hash)
        );
      });

      // 修改后的选项卡切换逻辑
      $(document).on('click', '.tab', function() {
        const tab = $(this).data('tab');
        $('.tab').removeClass('active');
        $(this).addClass('active');
        $('.tab-page').removeClass('active');
        $(`#${tab}Page`).addClass('active');
      });

      // 注册功能
      $('#signupBtn').click(async () => {
        const nickname = $('#signupNickname').val().trim();
        const email = $('#signupEmail').val().trim();
        const password = $('#signupPassword').val();
        const passwordConfirm = $('#signupPasswordConfirm').val();

        // 验证逻辑
        if (!nickname || nickname.length < 2 || nickname.length > 16) {
          return showError('昵称需为2-16位字符');
        }
        if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
          return showError('请输入有效的邮箱地址');
        }
        if (password.length < 8) {
          return showError('密码长度至少8位');
        }
        if (password !== passwordConfirm) {
          return showError('两次输入的密码不一致');
        }
        if (!$('#agreeTerms').prop('checked')) {
          return showError('请同意用户协议');
        }

        try {
          const user = new AV.User();
          user.setUsername(nickname);
          user.setPassword(password);
          user.setEmail(email);
          user.set('nickname', nickname);
          
          await user.signUp();
          alert('注册成功，已自动登录');
          $('#pc-username').text(nickname); 
          updateUserStatus();
          $('#loginModal').removeClass('active');
          $('body').removeClass('no-scroll');
        } catch (err) {
          showError(`注册失败：${err.message}`);
        }
      });

      // 密码强度实时检测
      $('#signupPassword').on('input', function() {
        const strength = checkPasswordStrength($(this).val());
        $('.password-strength').attr('class', 'password-strength ' + strength);
      });

      function checkPasswordStrength(password) {
        let strength = 0;
        if (password.length >= 8) strength++;
        if (password.match(/[A-Z]/)) strength++;
        if (password.match(/[0-9]/)) strength++;
        if (password.match(/[^A-Za-z0-9]/)) strength++;
        
        return strength > 3 ? 'strong' : strength > 1 ? 'medium' : 'weak';
      }

      // 忘记密码功能
      $('#forgotBtn').click(async () => {
        const email = $('#forgotEmail').val().trim();
        if (!validateEmail(email)) return showError('请输入有效邮箱地址');
        
        try {
          await AV.User.requestPasswordReset(email);
          alert('密码重置邮件已发送至您的邮箱');
          $('#loginModal').removeClass('active');
          $('body').removeClass('no-scroll');
        } catch (err) {
          showError(`操作失败：${err.message}`);
        }
      });

      // 登录功能
      $('#loginBtn').click(async () => {
        const email = $('#loginEmail').val();
        const password = $('#loginPassword').val();
        if (!email || !password) return alert("请填写完整信息");
        try {
          await AV.User.logIn(email, password);
          alert("登录成功！");
          $('#loginModal').removeClass('active');
          $('body').removeClass('no-scroll');
          updateUserStatus();
        } catch (err) {
          alert("登录失败：" + err.message);
        }
      });

      // 登出功能
      $(document).on('click', '#logoutBtn, #logoutBtnBox', async () => {
        await AV.User.logOut();
        alert("已退出");
        updateUserStatus();
      });

      // 导航栏滚动效果
      $(window).scroll(function () {
        $(".navbar").toggleClass("scrolled", $(this).scrollTop() > 50);
      });

      // 移动端菜单切换
      $(".hamburger").click(function () {
        $(this).toggleClass("active");
        $(".nav-links").toggleClass("active");
        $("body").toggleClass("no-scroll");
      });

      // 工具站点折叠
      $("#tools .section-title").click(function () {
        const $container = $(".tools-container");
        const $icon = $(this).find(".toggle-icon");
        $icon.toggleClass("active");
        $container.toggleClass("active");
        $container.css("max-height", $container.hasClass("active") ? $container[0].scrollHeight + "px" : "0");
      });

      // 视频弹窗控制
      const videoModal = $("#videoModal");
      const video = $("#videoModal video")[0];
      $("#watch-performance").click(function (e) {
        e.preventDefault();
        videoModal.addClass("active");
        video.play().catch((error) => console.log("视频播放失败:", error));
      });

      $(".close-video, #videoModal").click(function (e) {
        if (e.target === this) {
          videoModal.removeClass("active");
          video.pause();
        }
      });

      // 图片懒加载
      const lazyImages = $("img[data-src]");
      const imageObserver = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            const img = entry.target;
            img.src = img.dataset.src;
            img.removeAttribute("data-src");
            imageObserver.unobserve(img);
          }
        });
      });
      lazyImages.each((i, img) => imageObserver.observe(img));

      // 卡片悬停效果
      $(".achievement-card, .teacher-card, .tool-card").hover(
        () => $(this).addClass("hover"),
        () => $(this).removeClass("hover")
      );

      // 窗口尺寸调整
      $(window).resize(function () {
        // 响应式导航栏
        if ($(window).width() > 768) {
          $(".hamburger").removeClass("active");
          $(".nav-links").removeClass("active");
          $("body").removeClass("no-scroll");
        }

        // 调整个人中心按钮位置
        $('#toggleUserPanel').css(
          'right',
          $(window).width() < 768 ? '20px' : '340px'
        );
      });

      // 加载动画
      const loader = document.querySelector(".loader");
      if (loader) {
        loader.classList.add("hidden");
        setTimeout(() => loader.remove(), 500);
      }

      // 通用函数
      function showError(msg) {
        const $error = $('.tab-page.active').find('.error-message');
        $error.text(msg).fadeIn().delay(3000).fadeOut();
      }

      function validateEmail(email) {
        return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
      }

      // 增强点击处理逻辑
      $(document).on('click', '[data-auth]', function(e) {
        e.preventDefault();
        if (!AV.User.current()) {
            $('#loginModal').addClass('active');
            $('body').addClass('no-scroll');
        }
      });
    });
  </script>
</body>
</html>